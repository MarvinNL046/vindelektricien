# Dynamic Sitemap Generation

## Overview

Just like WordPress automatically adds new pages to the sitemap, our Next.js app does this too!

## How It Works

### Automatic Sitemap Generation
- When you add a new facility to the data files
- The sitemap is automatically updated at the next build
- No manual steps required!

### Location
- Sitemap: `https://www.rehabnearbyme.com/sitemap.xml`
- Generated by: `/app/sitemap.ts`

### What Gets Automatically Added?

1. **Static pages** (homepage, search, compare, etc.)
2. **State pages** - Automatically for each state with data
3. **County pages** - Automatically for each county
4. **Facility pages** - Automatically for each facility
5. **City pages** - Automatically for each unique city
6. **Type pages** - For each facility type

### Development vs Production

**Development (npm run dev)**
- Sitemap is dynamically generated with each request
- Perfect for testing

**Production (npm run build && npm run start)**
- Sitemap is generated during build
- Cached for fast response times
- Refreshed with each new deployment

### Removing Old Static Sitemaps

Run this command to clean up old static sitemaps:

```bash
npx tsx scripts/cleanup-old-sitemaps.ts
```

### Benefits

1. **Zero Maintenance** - Add data, sitemap updates automatically
2. **Always Accurate** - No more forgotten pages
3. **SEO Optimized** - Correct priorities and change frequencies
4. **Type Safe** - TypeScript ensures correct URLs

### Google Search Console

After deployment:
1. Go to Google Search Console
2. Remove old sitemap references
3. Add new one: `https://www.rehabnearbyme.com/sitemap.xml`
4. Google will automatically discover all new pages!

### Troubleshooting

**Sitemap not visible in development?**
- Check: http://localhost:3000/sitemap.xml
- Make sure you're running `npm run dev`

**New pages not in sitemap?**
- Check if the data is in the data files
- Check if `/public/data/facilities.json` is synchronized
- Run `npm run build` to test

## Technical Details

The sitemap is generated by Next.js's built-in sitemap functionality:
- Uses the `sitemap()` function in `app/sitemap.ts`
- Reads data from our JSON files
- Automatically generates all URLs
- Adds metadata (lastModified, priority, changeFrequency)
